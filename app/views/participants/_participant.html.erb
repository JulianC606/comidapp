<%# locals: (participant:, type: :index)  %>

<div class="bg-white shadow-lg border border-gray-50 rounded-md p-6 flex flex-col justify-between" id="<%= dom_id participant %>">
  <div>
    <% if type == :index %>
      <h2 class="text-xl font-semibold mb-1"><%= participant.name %></h2>
    <% end %>
    <p class="text-sm text-gray-600 mb-2">
      <strong><%= participant.human_attribute_name(:barcode) %></strong>:
      <%= participant.barcode %>
    </p>
    <p class="text-sm text-gray-600 mb-2">
      <strong><%= participant.human_attribute_name(:role) %></strong>:
      <%= participant.human_attribute_name("role/#{participant.role}") %>
    </p>
    <p class="text-sm text-gray-600 mb-2">
      <strong><%= participant.human_attribute_name(:food_provider) %></strong>:
      <%= participant.food_provider.name %>
    </p>
    <% unless type == :index %>
      <p class="text-sm text-gray-600 mb-2">
        <strong><%= participant.human_attribute_name(:welcome_kit) %></strong>:
        <% if participant.welcome_kit? %>
          <%= t('.delivered') %>
          <% if Current.user.admin? %>
            <%= button_to participant_path(barcode: participant.barcode), 
                          method: :patch, 
                          params: { participant: { welcome_kit: false } },
                          class: 'btn sm alt w-full lg:w-auto' do %>
              <%= t '.revert' %>
            <% end %>
          <% end %>
        <% else %>
          <%= button_to participant_path(barcode: participant.barcode), 
                        method: :patch, 
                        params: { participant: { welcome_kit: true } },
                        class: 'btn sm alt w-full lg:w-auto' do %>
            <%= t '.deliver' %>
          <% end %>
        <% end %>
      </p>
    <% end %>
  </div>
  <% if type == :index %>
    <div class="flex justify-start space-x-4">
      <%= link_to t('helpers.anchors.show', model: participant.human_class_name),
                  participant_path(participant.barcode),
                  class: "ms-1 rounded-md px-2.5 py-1.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
    </div>
  <% end %>
</div>
